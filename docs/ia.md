# 매출 입력/조회 시스템 IA (Information Architecture)

## 1. 주요 화면
1. 로그인 화면
2. 매출 입력 화면
3. 매출 조회 화면

(마이페이지, 설정, 통계 대시는 스코프 아웃)

---

## 2. 내비게이션 구조

### URL 구조 (프론트, Next.js)
- `/login`
  - Supabase Auth (이메일/비밀번호 등)
- `/sales/new`
  - 매출 입력 화면
  - 기본 랜딩 화면(로그인 직후 여기로 바로 오게 할 예정)
- `/sales?date=YYYY-MM-DD`
  - 매출 조회 화면
  - 기본은 `/sales` → 오늘 날짜 기준 조회

### 상단/탭 내비
- 모바일:
  - 상단 고정 탭 2개
    - [매출 입력] → `/sales/new`
    - [매출 조회] → `/sales`
- 데스크탑:
  - 좌측 사이드바 또는 헤더 내비게이션
    - 매출 입력
    - 매출 조회

---

## 3. 화면 흐름 (User Flow)

### 3.1 로그인 → 매출 입력
1. 사용자가 `/login`에서 Supabase Auth로 로그인
2. 로그인 성공 시 `/sales/new`로 이동
   - 이유: 실제 사용자는 "오늘 매출 적는 행동"이 가장 빈번하다.

### 3.2 매출 입력 → 매출 조회
1. 사용자가 `/sales/new`에서 매출 데이터를 입력하고 저장
2. 상단 탭/내비를 눌러 `/sales`로 이동
3. `/sales`에서 오늘(또는 특정 일자)의 합계, 상세 목록 확인
4. `/sales` 화면 내 "새 매출 입력" CTA를 통해 다시 `/sales/new`로 복귀 가능

즉, 입력 ↔ 조회를 반복하며 사용하는 루프를 의도적으로 매우 짧게 설계한다.

---

## 4. 화면별 정보 구조

### 4.1 매출 입력 화면 (`/sales/new`)

#### 상단
- 페이지 타이틀: "매출 입력"
- (선택적으로) 현재 로그인된 매장명 표기

#### 본문 (입력 폼)
- 매출 발생일자 (Date Picker)
  - 기본: 오늘 날짜
  - 미래 날짜 불가
- 고객 수 (Number Input)
  - stepper(▲▼) 제공
- 금액 (Number Input)
  - 천 단위 콤마 표시
- 메모 (Textarea)
  - placeholder: "점심 단체 20명 예약", "배달 포함" 등

#### 하단
- [저장] 버튼 (Primary)
- 저장 성공 시:
  - Toast: "저장되었습니다"
  - 고객 수/금액/메모는 초기화, 날짜는 유지(동일 날짜 반복 입력 빠르게)

#### 에러 영역
- 각 필드 아래에 인라인 에러
- 상단에 전역 에러 알림 바(서버 응답 에러 등)

---

### 4.2 매출 조회 화면 (`/sales`)

#### 상단
- 페이지 타이틀: "매출 조회"
- 날짜 선택 컴포넌트 (Date Picker)
  - 기본: 오늘 날짜
  - 날짜 변경 시 자동 재조회

#### 요약 섹션
- 카드 1: "총 매출 금액" / {합계}원
- 카드 2: "총 고객 수" / {합계}명
- 시각적으로 강조 (굵은 텍스트, 큰 숫자)

#### 상세 리스트
- 각 매출 레코드를 카드/행 형태로 나열
  - 매출 발생일자 (YYYY-MM-DD)
  - 고객 수
  - 금액(원 단위)
  - 메모(있으면 출력, 없으면 생략 또는 '-')
  - 기록 시간 (정렬 기준이 되는 정보)
- 정렬: 최근 기록이 위

#### 빈 상태(empty state)
- "기록된 매출이 없습니다"
- CTA: [오늘 매출 입력하기] → `/sales/new`

---

## 5. 컨텐츠 계층 (우선순위)

### 매출 입력 화면
1. 페이지 제목
2. 입력 폼 (일자 → 고객 수 → 금액 → 메모)
3. 저장 버튼
4. 피드백 (성공/실패)

→ 이 페이지의 목적은 **기록을 남기는 것**이므로, 리스트나 분석 정보는 일부러 배제한다.

### 매출 조회 화면
1. 날짜 선택
2. 합계(매출 총액 / 고객 수 총합)
3. 상세 항목 리스트
4. (없을 경우) 빈 상태 문구 + 입력으로 이동 CTA

→ 이 페이지의 목적은 **확인과 검증**이므로, 입력 요소는 최소화하고 요약 수치를 최상단에 둔다.

---

## 6. 백엔드 API 인터페이스 (IA 관점에서 호출 지점)

### POST `/api/sales`
- 사용 위치: `/sales/new` 페이지에서 [저장] 클릭 시
- Body:
  - date
  - customerCount
  - amount
  - memo
- Headers:
  - Authorization: Bearer <supabase-access-token>

### GET `/api/sales?date=YYYY-MM-DD`
- 사용 위치: `/sales` 페이지 로드 및 날짜 변경 시
- Response:
  - date
  - totalAmount
  - totalCustomers
  - items[] (각 매출 기록)

---

## 7. 접근권한 / 데이터 스코프
- Supabase Auth 기반 JWT로 사용자를 식별
- Spring Boot는 JWT를 검증하고 user_id → store_id를 매핑
- API는 항상 store_id 범위 내 데이터만 반환
- 여러 매장을 운영하는 계정(멀티 스토어) 확장은 향후 구조에서 store_id 파라미터 추가로 대응 가능

---

## 8. 반응형(모바일/데스크탑) IA 차이

### 모바일
- 상단 탭: [입력] / [조회] 를 바로 전환 (헤더형 탭)
- `/sales/new` 폼은 세로 한 열
- `/sales` 리스트는 세로 카드

### 데스크탑
- 좌측 사이드바 내비게이션 (매출 입력 / 매출 조회)
- 본문 영역은 조금 더 여유로운 레이아웃
- 조회 화면에서 상단에 날짜+요약카드, 하단에 리스트

---

## 9. 요약
- IA는 단순하다: 로그인 → 입력(/sales/new) → 조회(/sales)
- 핵심은 "반복 입력"과 "빠른 검증" 루프를 최소 동선으로 보장하는 것이다.
